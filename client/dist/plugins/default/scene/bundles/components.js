"use strict";!function t(e,i,r){function o(n,a){if(!i[n]){if(!e[n]){var p="function"==typeof require&&require;if(!a&&p)return p(n,!0);if(s)return s(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[n]={exports:{}};e[n][0].call(c.exports,function(t){var i=e[n][1][t];return o(i?i:t)},c,c.exports,t,e,i,r)}return i[n].exports}for(var s="function"==typeof require&&require,n=0;n<r.length;n++)o(r[n]);return o}({1:[function(t,e,i){var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=SupEngine.THREE,s=t("./CameraUpdater"),n=function(t){function e(e){t.call(this,e,"Marker"),this.viewport={x:0,y:0,width:1,height:1},this.projectionNeedsUpdate=!0;for(var i=new o.Geometry,r=0;r<24;r++)i.vertices.push(new o.Vector3(0,0,0));this.line=new o.LineSegments(i,new o.LineBasicMaterial({color:16777215,opacity:.5,transparent:!0})),this.actor.threeObject.add(this.line),this.line.updateMatrixWorld(!1)}return r(e,t),e.prototype.setIsLayerActive=function(t){this.line.visible=t},e.prototype.setConfig=function(t){this.setOrthographicMode("orthographic"===t.mode),this.setFOV(t.fov),this.setOrthographicScale(t.orthographicScale),this.setViewport(t.viewport.x,t.viewport.y,t.viewport.width,t.viewport.height),this.setNearClippingPlane(t.nearClippingPlane),this.setFarClippingPlane(t.farClippingPlane),this.projectionNeedsUpdate=!1,this._resetGeometry()},e.prototype.setOrthographicMode=function(t){this.isOrthographic=t,this.projectionNeedsUpdate=!0},e.prototype.setFOV=function(t){this.fov=t,this.isOrthographic||(this.projectionNeedsUpdate=!0)},e.prototype.setOrthographicScale=function(t){this.orthographicScale=t,this.isOrthographic&&(this.projectionNeedsUpdate=!0)},e.prototype.setViewport=function(t,e,i,r){this.viewport.x=t,this.viewport.y=e,this.viewport.width=i,this.viewport.height=r,this.projectionNeedsUpdate=!0},e.prototype.setNearClippingPlane=function(t){this.nearClippingPlane=t,this.projectionNeedsUpdate=!0},e.prototype.setFarClippingPlane=function(t){this.farClippingPlane=t,this.projectionNeedsUpdate=!0},e.prototype.setRatio=function(t){this.ratio=t,this.projectionNeedsUpdate=!0},e.prototype._resetGeometry=function(){var t,e,i=this.nearClippingPlane,r=this.farClippingPlane;if(this.isOrthographic){var s=this.orthographicScale/2*this.viewport.width/this.viewport.height;null!=this.ratio&&(s*=this.ratio),t=new o.Vector3(s,this.orthographicScale/2,r),e=new o.Vector3(s,this.orthographicScale/2,i)}else{var n=Math.tan(o.Math.degToRad(this.fov/2));t=new o.Vector3(r*n,r*n,r),e=t.clone().normalize().multiplyScalar(i)}var a=this.line.geometry.vertices;a[0].set(-e.x,e.y,-i),a[1].set(e.x,e.y,-i),a[2].set(e.x,e.y,-i),a[3].set(e.x,-e.y,-i),a[4].set(e.x,-e.y,-i),a[5].set(-e.x,-e.y,-i),a[6].set(-e.x,-e.y,-i),a[7].set(-e.x,e.y,-i),a[8].set(-t.x,t.y,-r),a[9].set(t.x,t.y,-r),a[10].set(t.x,t.y,-r),a[11].set(t.x,-t.y,-r),a[12].set(t.x,-t.y,-r),a[13].set(-t.x,-t.y,-r),a[14].set(-t.x,-t.y,-r),a[15].set(-t.x,t.y,-r),a[16].set(-e.x,e.y,-i),a[17].set(-t.x,t.y,-r),a[18].set(e.x,e.y,-i),a[19].set(t.x,t.y,-r),a[20].set(e.x,-e.y,-i),a[21].set(t.x,-t.y,-r),a[22].set(-e.x,-e.y,-i),a[23].set(-t.x,-t.y,-r),this.line.geometry.verticesNeedUpdate=!0},e.prototype._destroy=function(){this.actor.threeObject.remove(this.line),this.line.geometry.dispose(),this.line.material.dispose(),this.line=null,t.prototype._destroy.call(this)},e.prototype.update=function(){this.projectionNeedsUpdate&&(this.projectionNeedsUpdate=!1,this._resetGeometry())},e.Updater=s.default,e}(SupEngine.ActorComponent);Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},{"./CameraUpdater":2}],2:[function(t,e,i){var r=function(){function t(t,e,i){var r=this;this.onResourceReceived=function(t,e){r.resource=e,r.updateRatio()},this.onResourceEdited=function(t,e,i){r.updateRatio()},this.client=t,this.camera=e,this.config=i,this.camera.setConfig(this.config),this.camera.setRatio(5/3),this.client.subResource("gameSettings",this)}return t.prototype.destroy=function(){null!=this.resource&&this.client.unsubResource("gameSettings",this)},t.prototype.config_setProperty=function(t,e){this.camera.setConfig(this.config)},t.prototype.updateRatio=function(){null!=this.resource.pub.ratioNumerator&&null!=this.resource.pub.ratioDenominator?this.camera.setRatio(this.resource.pub.ratioNumerator/this.resource.pub.ratioDenominator):this.camera.setRatio(5/3)},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=r},{}],3:[function(t,e,i){var r=t("./CameraMarker");SupEngine.registerEditorComponentClass("CameraMarker",r.default)},{"./CameraMarker":1}]},{},[3]);