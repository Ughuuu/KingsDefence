"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function n(t,e,r){function i(o,c){if(!e[o]){if(!t[o]){var a="function"==typeof require&&require;if(!c&&a)return a(o,!0);if(u)return u(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=e[o]={exports:{}};t[o][0].call(l.exports,function(n){var e=t[o][1][n];return i(e?e:n)},l,l.exports,n,t,e,r)}return e[o].exports}for(var u="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(n,t,e){(function(n,e){!function(){function r(){}function i(n){return n}function u(n){return!!n}function o(n){return!n}function c(n){return function(){if(null===n)throw new Error("Callback was already called.");n.apply(this,arguments),n=null}}function a(n){return function(){null!==n&&(n.apply(this,arguments),n=null)}}function f(n){return W(n)||"number"==typeof n.length&&n.length>=0&&n.length%1===0}function l(n,t){for(var e=-1,r=n.length;++e<r;)t(n[e],e,n)}function s(n,t){for(var e=-1,r=n.length,i=Array(r);++e<r;)i[e]=t(n[e],e,n);return i}function p(n){return s(Array(n),function(n,t){return t})}function d(n,t,e){return l(n,function(n,r,i){e=t(e,n,r,i)}),e}function h(n,t){l(C(n),function(e){t(n[e],e)})}function y(n,t){for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function m(n){var t,e,r=-1;return f(n)?(t=n.length,function(){return r++,r<t?r:null}):(e=C(n),t=e.length,function(){return r++,r<t?e[r]:null})}function v(n,t){return t=null==t?n.length-1:+t,function(){for(var e=Math.max(arguments.length-t,0),r=Array(e),i=0;i<e;i++)r[i]=arguments[i+t];switch(t){case 0:return n.call(this,r);case 1:return n.call(this,arguments[0],r)}}}function g(n){return function(t,e,r){return n(t,r)}}function w(n){return function(t,e,i){i=a(i||r),t=t||[];var u=m(t);if(n<=0)return i(null);var o=!1,f=0,l=!1;!function r(){if(o&&f<=0)return i(null);for(;f<n&&!l;){var a=u();if(null===a)return o=!0,void(f<=0&&i(null));f+=1,e(t[a],a,c(function(n){f-=1,n?(i(n),l=!0):r()}))}}()}}function b(n){return function(t,e,r){return n(q.eachOf,t,e,r)}}function k(n){return function(t,e,r,i){return n(w(e),t,r,i)}}function E(n){return function(t,e,r){return n(q.eachOfSeries,t,e,r)}}function S(n,t,e,i){i=a(i||r),t=t||[];var u=f(t)?[]:{};n(t,function(n,t,r){e(n,function(n,e){u[t]=e,r(n)})},function(n){i(n,u)})}function O(n,t,e,r){var i=[];n(t,function(n,t,r){e(n,function(e){e&&i.push({index:t,value:n}),r()})},function(){r(s(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})}function T(n,t,e,r){O(n,t,function(n,t){e(n,function(n){t(!n)})},r)}function x(n,t,e){return function(r,i,u,o){function c(){o&&o(e(!1,void 0))}function a(n,r,i){return o?void u(n,function(r){o&&t(r)&&(o(e(!0,n)),o=u=!1),i()}):i()}arguments.length>3?n(r,i,a,c):(o=u,u=i,n(r,a,c))}}function I(n,t){return t}function L(n,t,e){e=e||r;var i=f(t)?[]:{};n(t,function(n,t,e){n(v(function(n,r){r.length<=1&&(r=r[0]),i[t]=r,e(n)}))},function(n){e(n,i)})}function A(n,t,e,r){var i=[];n(t,function(n,t,r){e(n,function(n,t){i=i.concat(t||[]),r(n)})},function(n){r(n,i)})}function _(n,t,e){function i(n,t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");return n.started=!0,W(t)||(t=[t]),0===t.length&&n.idle()?q.setImmediate(function(){n.drain()}):(l(t,function(t){var u={data:t,callback:i||r};e?n.tasks.unshift(u):n.tasks.push(u),n.tasks.length===n.concurrency&&n.saturated()}),void q.setImmediate(n.process))}function u(n,t){return function(){o-=1;var e=!1,r=arguments;l(t,function(n){l(a,function(t,r){t!==n||e||(a.splice(r,1),e=!0)}),n.callback.apply(n,r)}),n.tasks.length+o===0&&n.drain(),n.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var o=0,a=[],f={tasks:[],concurrency:t,payload:e,saturated:r,empty:r,drain:r,started:!1,paused:!1,push:function(n,t){i(f,n,!1,t)},kill:function(){f.drain=r,f.tasks=[]},unshift:function(n,t){i(f,n,!0,t)},process:function(){for(;!f.paused&&o<f.concurrency&&f.tasks.length;){var t=f.payload?f.tasks.splice(0,f.payload):f.tasks.splice(0,f.tasks.length),e=s(t,function(n){return n.data});0===f.tasks.length&&f.empty(),o+=1,a.push(t[0]);var r=c(u(f,t));n(e,r)}},length:function(){return f.tasks.length},running:function(){return o},workersList:function(){return a},idle:function(){return f.tasks.length+o===0},pause:function(){f.paused=!0},resume:function(){if(f.paused!==!1){f.paused=!1;for(var n=Math.min(f.concurrency,f.tasks.length),t=1;t<=n;t++)q.setImmediate(f.process)}}};return f}function R(n){return v(function(t,e){t.apply(null,e.concat([v(function(t,e){"object"===("undefined"==typeof console?"undefined":_typeof(console))&&(t?console.error&&console.error(t):console[n]&&l(e,function(t){console[n](t)}))})]))})}function j(n){return function(t,e,r){n(p(t),e,r)}}function M(n){return v(function(t,e){var r=v(function(e){var r=this,i=e.pop();return n(t,function(n,t,i){n.apply(r,e.concat([i]))},i)});return e.length?r.apply(this,e):r})}function H(n){return v(function(t){var e=t.pop();t.push(function(){var n=arguments;r?q.setImmediate(function(){e.apply(null,n)}):e.apply(null,n)});var r=!0;n.apply(this,t),r=!1})}var P,q={},F="object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e.global===e&&e||this;null!=F&&(P=F.async),q.noConflict=function(){return F.async=P,q};var U=Object.prototype.toString,W=Array.isArray||function(n){return"[object Array]"===U.call(n)},z=function(n){var t="undefined"==typeof n?"undefined":_typeof(n);return"function"===t||"object"===t&&!!n},C=Object.keys||function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t},D="function"==typeof setImmediate&&setImmediate,N=D?function(n){D(n)}:function(n){setTimeout(n,0)};"object"===("undefined"==typeof n?"undefined":_typeof(n))&&"function"==typeof n.nextTick?q.nextTick=n.nextTick:q.nextTick=N,q.setImmediate=D?N:q.nextTick,q.forEach=q.each=function(n,t,e){return q.eachOf(n,g(t),e)},q.forEachSeries=q.eachSeries=function(n,t,e){return q.eachOfSeries(n,g(t),e)},q.forEachLimit=q.eachLimit=function(n,t,e,r){return w(t)(n,g(e),r)},q.forEachOf=q.eachOf=function(n,t,e){function i(n){f--,n?e(n):null===u&&f<=0&&e(null)}e=a(e||r),n=n||[];for(var u,o=m(n),f=0;null!=(u=o());)f+=1,t(n[u],u,c(i));0===f&&e(null)},q.forEachOfSeries=q.eachOfSeries=function(n,t,e){function i(){var r=!0;return null===o?e(null):(t(n[o],o,c(function(n){if(n)e(n);else{if(o=u(),null===o)return e(null);r?q.setImmediate(i):i()}})),void(r=!1))}e=a(e||r),n=n||[];var u=m(n),o=u();i()},q.forEachOfLimit=q.eachOfLimit=function(n,t,e,r){w(t)(n,e,r)},q.map=b(S),q.mapSeries=E(S),q.mapLimit=k(S),q.inject=q.foldl=q.reduce=function(n,t,e,r){q.eachOfSeries(n,function(n,r,i){e(t,n,function(n,e){t=e,i(n)})},function(n){r(n,t)})},q.foldr=q.reduceRight=function(n,t,e,r){var u=s(n,i).reverse();q.reduce(u,t,e,r)},q.transform=function(n,t,e,r){3===arguments.length&&(r=e,e=t,t=W(n)?[]:{}),q.eachOf(n,function(n,r,i){e(t,n,r,i)},function(n){r(n,t)})},q.select=q.filter=b(O),q.selectLimit=q.filterLimit=k(O),q.selectSeries=q.filterSeries=E(O),q.reject=b(T),q.rejectLimit=k(T),q.rejectSeries=E(T),q.any=q.some=x(q.eachOf,u,i),q.someLimit=x(q.eachOfLimit,u,i),q.all=q.every=x(q.eachOf,o,o),q.everyLimit=x(q.eachOfLimit,o,o),q.detect=x(q.eachOf,i,I),q.detectSeries=x(q.eachOfSeries,i,I),q.detectLimit=x(q.eachOfLimit,i,I),q.sortBy=function(n,t,e){function r(n,t){var e=n.criteria,r=t.criteria;return e<r?-1:e>r?1:0}q.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){return n?e(n):void e(null,s(t.sort(r),function(n){return n.value}))})},q.auto=function(n,t,e){function i(n){g.unshift(n)}function u(n){var t=y(g,n);t>=0&&g.splice(t,1)}function o(){f--,l(g.slice(0),function(n){n()})}"function"==typeof arguments[1]&&(e=t,t=null),e=a(e||r);var c=C(n),f=c.length;if(!f)return e(null);t||(t=f);var s={},p=0,m=!1,g=[];i(function(){f||e(null,s)}),l(c,function(r){function c(){return p<t&&d(w,function(n,t){return n&&s.hasOwnProperty(t)},!0)&&!s.hasOwnProperty(r)}function a(){c()&&(p++,u(a),l[l.length-1](g,s))}if(!m){for(var f,l=W(n[r])?n[r]:[n[r]],g=v(function(n,t){if(p--,t.length<=1&&(t=t[0]),n){var i={};h(s,function(n,t){i[t]=n}),i[r]=t,m=!0,e(n,i)}else s[r]=t,q.setImmediate(o)}),w=l.slice(0,l.length-1),b=w.length;b--;){if(!(f=n[w[b]]))throw new Error("Has nonexistent dependency in "+w.join(", "));if(W(f)&&y(f,r)>=0)throw new Error("Has cyclic dependencies")}c()?(p++,l[l.length-1](g,s)):i(a)}})},q.retry=function(n,t,e){function r(n,t){if("number"==typeof t)n.times=parseInt(t,10)||u;else{if("object"!==("undefined"==typeof t?"undefined":_typeof(t)))throw new Error("Unsupported argument type for 'times': "+("undefined"==typeof t?"undefined":_typeof(t)));n.times=parseInt(t.times,10)||u,n.interval=parseInt(t.interval,10)||o}}function i(n,t){function e(n,e){return function(r){n(function(n,t){r(!n||e,{err:n,result:t})},t)}}function r(n){return function(t){setTimeout(function(){t(null)},n)}}for(;a.times;){var i=!(a.times-=1);c.push(e(a.task,i)),!i&&a.interval>0&&c.push(r(a.interval))}q.series(c,function(t,e){e=e[e.length-1],(n||a.callback)(e.err,e.result)})}var u=5,o=0,c=[],a={times:u,interval:o},f=arguments.length;if(f<1||f>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return f<=2&&"function"==typeof n&&(e=t,t=n),"function"!=typeof n&&r(a,n),a.callback=e,a.task=t,a.callback?i():i},q.waterfall=function(n,t){function e(n){return v(function(r,i){if(r)t.apply(null,[r].concat(i));else{var u=n.next();u?i.push(e(u)):i.push(t),H(n).apply(null,i)}})}if(t=a(t||r),!W(n)){var i=new Error("First argument to waterfall must be an array of functions");return t(i)}return n.length?void e(q.iterator(n))():t()},q.parallel=function(n,t){L(q.eachOf,n,t)},q.parallelLimit=function(n,t,e){L(w(t),n,e)},q.series=function(n,t){L(q.eachOfSeries,n,t)},q.iterator=function(n){function t(e){function r(){return n.length&&n[e].apply(null,arguments),r.next()}return r.next=function(){return e<n.length-1?t(e+1):null},r}return t(0)},q.apply=v(function(n,t){return v(function(e){return n.apply(null,t.concat(e))})}),q.concat=b(A),q.concatSeries=E(A),q.whilst=function(n,t,e){if(e=e||r,n()){var i=v(function(r,u){r?e(r):n.apply(this,u)?t(i):e.apply(null,[null].concat(u))});t(i)}else e(null)},q.doWhilst=function(n,t,e){var r=0;return q.whilst(function(){return++r<=1||t.apply(this,arguments)},n,e)},q.until=function(n,t,e){return q.whilst(function(){return!n.apply(this,arguments)},t,e)},q.doUntil=function(n,t,e){return q.doWhilst(n,function(){return!t.apply(this,arguments)},e)},q.during=function(n,t,e){e=e||r;var i=v(function(t,r){t?e(t):(r.push(u),n.apply(this,r))}),u=function(n,r){n?e(n):r?t(i):e(null)};n(u)},q.doDuring=function(n,t,e){var r=0;q.during(function(n){r++<1?n(null,!0):t.apply(this,arguments)},n,e)},q.queue=function(n,t){var e=_(function(t,e){n(t[0],e)},t,1);return e},q.priorityQueue=function(n,t){function e(n,t){return n.priority-t.priority}function i(n,t,e){for(var r=-1,i=n.length-1;r<i;){var u=r+(i-r+1>>>1);e(t,n[u])>=0?r=u:i=u-1}return r}function u(n,t,u,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return n.started=!0,W(t)||(t=[t]),0===t.length?q.setImmediate(function(){n.drain()}):void l(t,function(t){var c={data:t,priority:u,callback:"function"==typeof o?o:r};n.tasks.splice(i(n.tasks,c,e)+1,0,c),n.tasks.length===n.concurrency&&n.saturated(),q.setImmediate(n.process)})}var o=q.queue(n,t);return o.push=function(n,t,e){u(o,n,t,e)},delete o.unshift,o},q.cargo=function(n,t){return _(n,1,t)},q.log=R("log"),q.dir=R("dir"),q.memoize=function(n,t){var e={},r={},u=Object.prototype.hasOwnProperty;t=t||i;var o=v(function(i){var o=i.pop(),c=t.apply(null,i);u.call(e,c)?q.setImmediate(function(){o.apply(null,e[c])}):u.call(r,c)?r[c].push(o):(r[c]=[o],n.apply(null,i.concat([v(function(n){e[c]=n;var t=r[c];delete r[c];for(var i=0,u=t.length;i<u;i++)t[i].apply(null,n)})])))});return o.memo=e,o.unmemoized=n,o},q.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},q.times=j(q.map),q.timesSeries=j(q.mapSeries),q.timesLimit=function(n,t,e,r){return q.mapLimit(p(n),t,e,r)},q.seq=function(){var n=arguments;return v(function(t){var e=this,i=t[t.length-1];"function"==typeof i?t.pop():i=r,q.reduce(n,t,function(n,t,r){t.apply(e,n.concat([v(function(n,t){r(n,t)})]))},function(n,t){i.apply(e,[n].concat(t))})})},q.compose=function(){return q.seq.apply(null,Array.prototype.reverse.call(arguments))},q.applyEach=M(q.eachOf),q.applyEachSeries=M(q.eachOfSeries),q.forever=function(n,t){function e(n){return n?i(n):void u(e)}var i=c(t||r),u=H(n);e()},q.ensureAsync=H,q.constant=v(function(n){var t=[null].concat(n);return function(n){return n.apply(this,t)}}),q.wrapSync=q.asyncify=function(n){return v(function(t){var e,r=t.pop();try{e=n.apply(this,t)}catch(n){return r(n)}z(e)&&"function"==typeof e.then?e.then(function(n){r(null,n)}).catch(function(n){r(n.message?n:new Error(n))}):r(null,e)})},"object"===("undefined"==typeof t?"undefined":_typeof(t))&&t.exports?t.exports=q:"function"==typeof define&&define.amd?define([],function(){return q}):F.async=q}()}).call(this,n("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(n,t,e){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function u(n){if(s===setTimeout)return setTimeout(n,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(n,0);try{return s(n,0)}catch(t){try{return s.call(null,n,0)}catch(t){return s.call(this,n,0)}}}function o(n){if(p===clearTimeout)return clearTimeout(n);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(n);try{return p(n)}catch(t){try{return p.call(null,n)}catch(t){return p.call(this,n)}}}function c(){m&&h&&(m=!1,h.length?y=h.concat(y):v=-1,y.length&&a())}function a(){if(!m){var n=u(c);m=!0;for(var t=y.length;t;){for(h=y,y=[];++v<t;)h&&h[v].run();v=-1,t=y.length}h=null,m=!1,o(n)}}function f(n,t){this.fun=n,this.array=t}function l(){}var s,p,d=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(n){s=r}try{p="function"==typeof clearTimeout?clearTimeout:i}catch(n){p=i}}();var h,y=[],m=!1,v=-1;d.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];y.push(new f(n,t)),1!==y.length||m||u(a)},f.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(n){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(n){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],3:[function(n,t,e){function r(n,t,e){t.castShadow=e.castShadow,t.receiveShadow=e.receiveShadow,e.overrideOpacity&&(t.opacity=e.opacity);var r=parseInt(e.color,16);if(t.color.r=(r>>16&255)/255,t.color.g=(r>>8&255)/255,t.color.b=(255&r)/255,null!=e.modelAssetId){var i=n.getOuterAsset(e.modelAssetId);if(null==i)return;e.overrideOpacity||(t.opacity=i.__inner.opacity);var u=void 0;if("shader"===e.materialType&&null!=e.shaderAssetId){var o=n.getOuterAsset(e.shaderAssetId);if(null==o)return;u=o.__inner}if(t.setModel(i.__inner,e.materialType,u),null!=e.animationId)for(var c=0,a=i.__inner.animations;c<a.length;c++){var f=a[c];if(f.id===e.animationId){t.setAnimation(f.name);break}}}}e.setupComponent=r},{}],4:[function(n,t,e){var r=n("./ModelRenderer"),i=n("./model");SupRuntime.registerPlugin("ModelRenderer",r),SupRuntime.registerPlugin("model",i)},{"./ModelRenderer":3,"./model":5}],5:[function(n,t,e){function r(n,t,e){n.getAssetData("assets/"+t.storagePath+"/model.json","json",function(r,i){var o=i.attributes;i.attributes={},u.each(o,function(e,r){n.getAssetData("assets/"+t.storagePath+"/attr-"+e+".dat","arraybuffer",function(n,t){i.attributes[e]=t,r()})},function(){var r=i.maps;i.textures={},u.each(r,function(e,r){var u=new Image;u.onload=function(){var n=i.textures[e]=new SupEngine.THREE.Texture(u);n.needsUpdate=!0,"pixelated"===i.filtering&&(n.magFilter=SupEngine.THREE.NearestFilter,n.minFilter=SupEngine.THREE.NearestFilter),"repeat"===i.wrapping?(n.wrapS=SupEngine.THREE.RepeatWrapping,n.wrapT=SupEngine.THREE.RepeatWrapping):"mirroredRepeat"===i.wrapping&&(n.wrapS=SupEngine.THREE.MirroredRepeatWrapping,n.wrapT=SupEngine.THREE.MirroredRepeatWrapping),r()},u.onerror=function(){r()},u.src=n.dataURL+"assets/"+t.storagePath+"/map-"+e+".dat"},function(){e(null,i)})})})}function i(n,t){return new window.Sup.Model(t)}var u=n("async");e.loadAsset=r,e.createOuterAsset=i},{async:1}]},{},[4]);