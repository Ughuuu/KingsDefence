"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[o]={exports:{}};t[o][0].call(h.exports,function(e){var n=t[o][1][e];return i(n?n:e)},h,h.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;u<r;u++)l[u].apply(this,s);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,n){var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("events"),s=function(e){function t(t){e.call(this),this.data=t}return r(t,e),t.prototype.getWidth=function(){return this.data.width},t.prototype.getHeight=function(){return this.data.height},t.prototype.getPixelsPerUnit=function(){return this.data.pixelsPerUnit},t.prototype.getLayersDepthOffset=function(){return this.data.layerDepthOffset},t.prototype.getLayersCount=function(){return this.data.layers.length},t.prototype.getLayerId=function(e){return this.data.layers[e].id},t.prototype.setTileAt=function(e,t,n,r){if(!(t<0||n<0||t>=this.data.width||n>=this.data.height)){var i=n*this.data.width+t;this.data.layers[e].data[i]=null!=r?r:0,this.emit("setTileAt",e,t,n)}},t.prototype.getTileAt=function(e,t,n){if(t<0||n<0||t>=this.data.width||n>=this.data.height)return 0;var r=n*this.data.width+t;return this.data.layers[e].data[r]},t}(i.EventEmitter);Object.defineProperty(n,"__esModule",{value:!0}),n.default=s},{events:1}],3:[function(e,t,n){var r=function(){function e(e){this.data=e}return e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],4:[function(e,t,n){function r(e,t,n){if(null!=n.tileMapAssetId){var r,i=e.getOuterAsset(n.tileMapAssetId);if("shader"===n.materialType&&null!=n.shaderAssetId){var s=e.getOuterAsset(n.shaderAssetId);if(null==s)return;r=s.__inner}t.castShadow=n.castShadow,t.receiveShadow=n.receiveShadow,t.setTileMap(i.__inner,n.materialType,r);var o=null!=n.tileSetAssetId?n.tileSetAssetId:i.__inner.data.tileSetId,a=e.getOuterAsset(o);t.setTileSet(a.__inner)}}n.setupComponent=r},{}],5:[function(e,t,n){var r=e("./TileMapRenderer"),i=e("./tileMap"),s=e("./tileSet");SupRuntime.registerPlugin("TileMapRenderer",r),SupRuntime.registerPlugin("tileMap",i),SupRuntime.registerPlugin("tileSet",s)},{"./TileMapRenderer":4,"./tileMap":6,"./tileSet":7}],6:[function(e,t,n){function r(e,t,n){e.getAssetData("assets/"+t.storagePath+"/tilemap.json","json",function(e,t){n(null,new s.default(t))})}function i(e,t){return new window.Sup.TileMap(t)}var s=e("../components/TileMap");n.loadAsset=r,n.createOuterAsset=i},{"../components/TileMap":2}],7:[function(e,t,n){function r(e,t,n){e.getAssetData("assets/"+t.storagePath+"/tileset.json","json",function(r,i){var o=new Image;o.onload=function(){i.texture=new SupEngine.THREE.Texture(o),i.texture.needsUpdate=!0,i.texture.magFilter=SupEngine.THREE.NearestFilter,i.texture.minFilter=SupEngine.THREE.NearestFilter,n(null,new s.default(i))},o.onerror=function(){n(null,new s.default(i))},o.src=e.dataURL+"assets/"+t.storagePath+"/image.dat"})}function i(e,t){return new window.Sup.TileSet(t)}var s=e("../components/TileSet");n.loadAsset=r,n.createOuterAsset=i},{"../components/TileSet":3}]},{},[5]);