"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function n(t,e,r){function i(o,c){if(!e[o]){if(!t[o]){var f="function"==typeof require&&require;if(!c&&f)return f(o,!0);if(u)return u(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var l=e[o]={exports:{}};t[o][0].call(l.exports,function(n){var e=t[o][1][n];return i(e?e:n)},l,l.exports,n,t,e,r)}return e[o].exports}for(var u="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(n,t,e){(function(n,e){!function(){function r(){}function i(n){return n}function u(n){return!!n}function o(n){return!n}function c(n){return function(){if(null===n)throw new Error("Callback was already called.");n.apply(this,arguments),n=null}}function f(n){return function(){null!==n&&(n.apply(this,arguments),n=null)}}function a(n){return F(n)||"number"==typeof n.length&&n.length>=0&&n.length%1===0}function l(n,t){for(var e=-1,r=n.length;++e<r;)t(n[e],e,n)}function s(n,t){for(var e=-1,r=n.length,i=Array(r);++e<r;)i[e]=t(n[e],e,n);return i}function p(n){return s(Array(n),function(n,t){return t})}function h(n,t,e){return l(n,function(n,r,i){e=t(e,n,r,i)}),e}function d(n,t){l(z(n),function(e){t(n[e],e)})}function y(n,t){for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function m(n){var t,e,r=-1;return a(n)?(t=n.length,function(){return r++,r<t?r:null}):(e=z(n),t=e.length,function(){return r++,r<t?e[r]:null})}function v(n,t){return t=null==t?n.length-1:+t,function(){for(var e=Math.max(arguments.length-t,0),r=Array(e),i=0;i<e;i++)r[i]=arguments[i+t];switch(t){case 0:return n.call(this,r);case 1:return n.call(this,arguments[0],r)}}}function g(n){return function(t,e,r){return n(t,r)}}function b(n){return function(t,e,i){i=f(i||r),t=t||[];var u=m(t);if(n<=0)return i(null);var o=!1,a=0,l=!1;!function r(){if(o&&a<=0)return i(null);for(;a<n&&!l;){var f=u();if(null===f)return o=!0,void(a<=0&&i(null));a+=1,e(t[f],f,c(function(n){a-=1,n?(i(n),l=!0):r()}))}}()}}function w(n){return function(t,e,r){return n(P.eachOf,t,e,r)}}function k(n){return function(t,e,r,i){return n(b(e),t,r,i)}}function O(n){return function(t,e,r){return n(P.eachOfSeries,t,e,r)}}function E(n,t,e,i){i=f(i||r),t=t||[];var u=a(t)?[]:{};n(t,function(n,t,r){e(n,function(n,e){u[t]=e,r(n)})},function(n){i(n,u)})}function S(n,t,e,r){var i=[];n(t,function(n,t,r){e(n,function(e){e&&i.push({index:t,value:n}),r()})},function(){r(s(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})}function T(n,t,e,r){S(n,t,function(n,t){e(n,function(n){t(!n)})},r)}function x(n,t,e){return function(r,i,u,o){function c(){o&&o(e(!1,void 0))}function f(n,r,i){return o?void u(n,function(r){o&&t(r)&&(o(e(!0,n)),o=u=!1),i()}):i()}arguments.length>3?n(r,i,f,c):(o=u,u=i,n(r,f,c))}}function I(n,t){return t}function A(n,t,e){e=e||r;var i=a(t)?[]:{};n(t,function(n,t,e){n(v(function(n,r){r.length<=1&&(r=r[0]),i[t]=r,e(n)}))},function(n){e(n,i)})}function L(n,t,e,r){var i=[];n(t,function(n,t,r){e(n,function(n,t){i=i.concat(t||[]),r(n)})},function(n){r(n,i)})}function _(n,t,e){function i(n,t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");return n.started=!0,F(t)||(t=[t]),0===t.length&&n.idle()?P.setImmediate(function(){n.drain()}):(l(t,function(t){var u={data:t,callback:i||r};e?n.tasks.unshift(u):n.tasks.push(u),n.tasks.length===n.concurrency&&n.saturated()}),void P.setImmediate(n.process))}function u(n,t){return function(){o-=1;var e=!1,r=arguments;l(t,function(n){l(f,function(t,r){t!==n||e||(f.splice(r,1),e=!0)}),n.callback.apply(n,r)}),n.tasks.length+o===0&&n.drain(),n.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var o=0,f=[],a={tasks:[],concurrency:t,payload:e,saturated:r,empty:r,drain:r,started:!1,paused:!1,push:function(n,t){i(a,n,!1,t)},kill:function(){a.drain=r,a.tasks=[]},unshift:function(n,t){i(a,n,!0,t)},process:function(){for(;!a.paused&&o<a.concurrency&&a.tasks.length;){var t=a.payload?a.tasks.splice(0,a.payload):a.tasks.splice(0,a.tasks.length),e=s(t,function(n){return n.data});0===a.tasks.length&&a.empty(),o+=1,f.push(t[0]);var r=c(u(a,t));n(e,r)}},length:function(){return a.tasks.length},running:function(){return o},workersList:function(){return f},idle:function(){return a.tasks.length+o===0},pause:function(){a.paused=!0},resume:function(){if(a.paused!==!1){a.paused=!1;for(var n=Math.min(a.concurrency,a.tasks.length),t=1;t<=n;t++)P.setImmediate(a.process)}}};return a}function j(n){return v(function(t,e){t.apply(null,e.concat([v(function(t,e){"object"===("undefined"==typeof console?"undefined":_typeof(console))&&(t?console.error&&console.error(t):console[n]&&l(e,function(t){console[n](t)}))})]))})}function M(n){return function(t,e,r){n(p(t),e,r)}}function C(n){return v(function(t,e){var r=v(function(e){var r=this,i=e.pop();return n(t,function(n,t,i){n.apply(r,e.concat([i]))},i)});return e.length?r.apply(this,e):r})}function R(n){return v(function(t){var e=t.pop();t.push(function(){var n=arguments;r?P.setImmediate(function(){e.apply(null,n)}):e.apply(null,n)});var r=!0;n.apply(this,t),r=!1})}var q,P={},D="object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e.global===e&&e||this;null!=D&&(q=D.async),P.noConflict=function(){return D.async=q,P};var H=Object.prototype.toString,F=Array.isArray||function(n){return"[object Array]"===H.call(n)},U=function(n){var t="undefined"==typeof n?"undefined":_typeof(n);return"function"===t||"object"===t&&!!n},z=Object.keys||function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t},N="function"==typeof setImmediate&&setImmediate,W=N?function(n){N(n)}:function(n){setTimeout(n,0)};"object"===("undefined"==typeof n?"undefined":_typeof(n))&&"function"==typeof n.nextTick?P.nextTick=n.nextTick:P.nextTick=W,P.setImmediate=N?W:P.nextTick,P.forEach=P.each=function(n,t,e){return P.eachOf(n,g(t),e)},P.forEachSeries=P.eachSeries=function(n,t,e){return P.eachOfSeries(n,g(t),e)},P.forEachLimit=P.eachLimit=function(n,t,e,r){return b(t)(n,g(e),r)},P.forEachOf=P.eachOf=function(n,t,e){function i(n){a--,n?e(n):null===u&&a<=0&&e(null)}e=f(e||r),n=n||[];for(var u,o=m(n),a=0;null!=(u=o());)a+=1,t(n[u],u,c(i));0===a&&e(null)},P.forEachOfSeries=P.eachOfSeries=function(n,t,e){function i(){var r=!0;return null===o?e(null):(t(n[o],o,c(function(n){if(n)e(n);else{if(o=u(),null===o)return e(null);r?P.setImmediate(i):i()}})),void(r=!1))}e=f(e||r),n=n||[];var u=m(n),o=u();i()},P.forEachOfLimit=P.eachOfLimit=function(n,t,e,r){b(t)(n,e,r)},P.map=w(E),P.mapSeries=O(E),P.mapLimit=k(E),P.inject=P.foldl=P.reduce=function(n,t,e,r){P.eachOfSeries(n,function(n,r,i){e(t,n,function(n,e){t=e,i(n)})},function(n){r(n,t)})},P.foldr=P.reduceRight=function(n,t,e,r){var u=s(n,i).reverse();P.reduce(u,t,e,r)},P.transform=function(n,t,e,r){3===arguments.length&&(r=e,e=t,t=F(n)?[]:{}),P.eachOf(n,function(n,r,i){e(t,n,r,i)},function(n){r(n,t)})},P.select=P.filter=w(S),P.selectLimit=P.filterLimit=k(S),P.selectSeries=P.filterSeries=O(S),P.reject=w(T),P.rejectLimit=k(T),P.rejectSeries=O(T),P.any=P.some=x(P.eachOf,u,i),P.someLimit=x(P.eachOfLimit,u,i),P.all=P.every=x(P.eachOf,o,o),P.everyLimit=x(P.eachOfLimit,o,o),P.detect=x(P.eachOf,i,I),P.detectSeries=x(P.eachOfSeries,i,I),P.detectLimit=x(P.eachOfLimit,i,I),P.sortBy=function(n,t,e){function r(n,t){var e=n.criteria,r=t.criteria;return e<r?-1:e>r?1:0}P.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){return n?e(n):void e(null,s(t.sort(r),function(n){return n.value}))})},P.auto=function(n,t,e){function i(n){g.unshift(n)}function u(n){var t=y(g,n);t>=0&&g.splice(t,1)}function o(){a--,l(g.slice(0),function(n){n()})}"function"==typeof arguments[1]&&(e=t,t=null),e=f(e||r);var c=z(n),a=c.length;if(!a)return e(null);t||(t=a);var s={},p=0,m=!1,g=[];i(function(){a||e(null,s)}),l(c,function(r){function c(){return p<t&&h(b,function(n,t){return n&&s.hasOwnProperty(t)},!0)&&!s.hasOwnProperty(r)}function f(){c()&&(p++,u(f),l[l.length-1](g,s))}if(!m){for(var a,l=F(n[r])?n[r]:[n[r]],g=v(function(n,t){if(p--,t.length<=1&&(t=t[0]),n){var i={};d(s,function(n,t){i[t]=n}),i[r]=t,m=!0,e(n,i)}else s[r]=t,P.setImmediate(o)}),b=l.slice(0,l.length-1),w=b.length;w--;){if(!(a=n[b[w]]))throw new Error("Has nonexistent dependency in "+b.join(", "));if(F(a)&&y(a,r)>=0)throw new Error("Has cyclic dependencies")}c()?(p++,l[l.length-1](g,s)):i(f)}})},P.retry=function(n,t,e){function r(n,t){if("number"==typeof t)n.times=parseInt(t,10)||u;else{if("object"!==("undefined"==typeof t?"undefined":_typeof(t)))throw new Error("Unsupported argument type for 'times': "+("undefined"==typeof t?"undefined":_typeof(t)));n.times=parseInt(t.times,10)||u,n.interval=parseInt(t.interval,10)||o}}function i(n,t){function e(n,e){return function(r){n(function(n,t){r(!n||e,{err:n,result:t})},t)}}function r(n){return function(t){setTimeout(function(){t(null)},n)}}for(;f.times;){var i=!(f.times-=1);c.push(e(f.task,i)),!i&&f.interval>0&&c.push(r(f.interval))}P.series(c,function(t,e){e=e[e.length-1],(n||f.callback)(e.err,e.result)})}var u=5,o=0,c=[],f={times:u,interval:o},a=arguments.length;if(a<1||a>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return a<=2&&"function"==typeof n&&(e=t,t=n),"function"!=typeof n&&r(f,n),f.callback=e,f.task=t,f.callback?i():i},P.waterfall=function(n,t){function e(n){return v(function(r,i){if(r)t.apply(null,[r].concat(i));else{var u=n.next();u?i.push(e(u)):i.push(t),R(n).apply(null,i)}})}if(t=f(t||r),!F(n)){var i=new Error("First argument to waterfall must be an array of functions");return t(i)}return n.length?void e(P.iterator(n))():t()},P.parallel=function(n,t){A(P.eachOf,n,t)},P.parallelLimit=function(n,t,e){A(b(t),n,e)},P.series=function(n,t){A(P.eachOfSeries,n,t)},P.iterator=function(n){function t(e){function r(){return n.length&&n[e].apply(null,arguments),r.next()}return r.next=function(){return e<n.length-1?t(e+1):null},r}return t(0)},P.apply=v(function(n,t){return v(function(e){return n.apply(null,t.concat(e))})}),P.concat=w(L),P.concatSeries=O(L),P.whilst=function(n,t,e){if(e=e||r,n()){var i=v(function(r,u){r?e(r):n.apply(this,u)?t(i):e.apply(null,[null].concat(u))});t(i)}else e(null)},P.doWhilst=function(n,t,e){var r=0;return P.whilst(function(){return++r<=1||t.apply(this,arguments)},n,e)},P.until=function(n,t,e){return P.whilst(function(){return!n.apply(this,arguments)},t,e)},P.doUntil=function(n,t,e){return P.doWhilst(n,function(){return!t.apply(this,arguments)},e)},P.during=function(n,t,e){e=e||r;var i=v(function(t,r){t?e(t):(r.push(u),n.apply(this,r))}),u=function(n,r){n?e(n):r?t(i):e(null)};n(u)},P.doDuring=function(n,t,e){var r=0;P.during(function(n){r++<1?n(null,!0):t.apply(this,arguments)},n,e)},P.queue=function(n,t){var e=_(function(t,e){n(t[0],e)},t,1);return e},P.priorityQueue=function(n,t){function e(n,t){return n.priority-t.priority}function i(n,t,e){for(var r=-1,i=n.length-1;r<i;){var u=r+(i-r+1>>>1);e(t,n[u])>=0?r=u:i=u-1}return r}function u(n,t,u,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return n.started=!0,F(t)||(t=[t]),0===t.length?P.setImmediate(function(){n.drain()}):void l(t,function(t){var c={data:t,priority:u,callback:"function"==typeof o?o:r};n.tasks.splice(i(n.tasks,c,e)+1,0,c),n.tasks.length===n.concurrency&&n.saturated(),P.setImmediate(n.process)})}var o=P.queue(n,t);return o.push=function(n,t,e){u(o,n,t,e)},delete o.unshift,o},P.cargo=function(n,t){return _(n,1,t)},P.log=j("log"),P.dir=j("dir"),P.memoize=function(n,t){var e={},r={},u=Object.prototype.hasOwnProperty;t=t||i;var o=v(function(i){var o=i.pop(),c=t.apply(null,i);u.call(e,c)?P.setImmediate(function(){o.apply(null,e[c])}):u.call(r,c)?r[c].push(o):(r[c]=[o],n.apply(null,i.concat([v(function(n){e[c]=n;var t=r[c];delete r[c];for(var i=0,u=t.length;i<u;i++)t[i].apply(null,n)})])))});return o.memo=e,o.unmemoized=n,o},P.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},P.times=M(P.map),P.timesSeries=M(P.mapSeries),P.timesLimit=function(n,t,e,r){return P.mapLimit(p(n),t,e,r)},P.seq=function(){var n=arguments;return v(function(t){var e=this,i=t[t.length-1];"function"==typeof i?t.pop():i=r,P.reduce(n,t,function(n,t,r){t.apply(e,n.concat([v(function(n,t){r(n,t)})]))},function(n,t){i.apply(e,[n].concat(t))})})},P.compose=function(){return P.seq.apply(null,Array.prototype.reverse.call(arguments))},P.applyEach=C(P.eachOf),P.applyEachSeries=C(P.eachOfSeries),P.forever=function(n,t){function e(n){return n?i(n):void u(e)}var i=c(t||r),u=R(n);e()},P.ensureAsync=R,P.constant=v(function(n){var t=[null].concat(n);return function(n){return n.apply(this,t)}}),P.wrapSync=P.asyncify=function(n){return v(function(t){var e,r=t.pop();try{e=n.apply(this,t)}catch(n){return r(n)}U(e)&&"function"==typeof e.then?e.then(function(n){r(null,n)}).catch(function(n){r(n.message?n:new Error(n))}):r(null,e)})},"object"===("undefined"==typeof t?"undefined":_typeof(t))&&t.exports?t.exports=P:"function"==typeof define&&define.amd?define([],function(){return P}):D.async=P}()}).call(this,n("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(n,t,e){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function u(n){if(s===setTimeout)return setTimeout(n,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(n,0);try{return s(n,0)}catch(t){try{return s.call(null,n,0)}catch(t){return s.call(this,n,0)}}}function o(n){if(p===clearTimeout)return clearTimeout(n);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(n);try{return p(n)}catch(t){try{return p.call(null,n)}catch(t){return p.call(this,n)}}}function c(){m&&d&&(m=!1,d.length?y=d.concat(y):v=-1,y.length&&f())}function f(){if(!m){var n=u(c);m=!0;for(var t=y.length;t;){for(d=y,y=[];++v<t;)d&&d[v].run();v=-1,t=y.length}d=null,m=!1,o(n)}}function a(n,t){this.fun=n,this.array=t}function l(){}var s,p,h=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(n){s=r}try{p="function"==typeof clearTimeout?clearTimeout:i}catch(n){p=i}}();var d,y=[],m=!1,v=-1;h.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];y.push(new a(n,t)),1!==y.length||m||u(f)},a.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.binding=function(n){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(n){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],3:[function(n,t,e){function r(n,t,e){if(null!=e.cubicModelAssetId){var r=n.getOuterAsset(e.cubicModelAssetId);if(null==r)return;e.overrideOpacity||(t.opacity=r.__inner.opacity);var i=void 0;if("shader"===e.materialType&&null!=e.shaderAssetId){var u=n.getOuterAsset(e.shaderAssetId);if(null==u)return;i=u.__inner}t.setCubicModel(r.__inner,e.materialType,i),null!=e.animationId&&r.__inner.animations.every(function(n){return n.id!==e.animationId||(t.setAnimation(n.name),!1)})}}e.setupComponent=r},{}],4:[function(n,t,e){function r(n,t,e){n.getAssetData("assets/"+t.storagePath+"/cubicModel.json","json",function(r,i){i.textures={};var o=i.maps;i.textures={},u.each(o,function(e,r){var u=document.createElement("canvas");u.width=i.textureWidth,u.height=i.textureHeight;var o=u.getContext("2d"),c=i.textures[e]=new SupEngine.THREE.Texture(u);c.needsUpdate=!0,c.magFilter=SupEngine.THREE.NearestFilter,c.minFilter=SupEngine.THREE.NearestFilter,n.getAssetData("assets/"+t.storagePath+"/map-"+e+".dat","arraybuffer",function(n,t){var e=new ImageData(new Uint8ClampedArray(t),i.textureWidth,i.textureHeight);o.putImageData(e,0,0),r()})},function(){e(null,i)})})}function i(n,t){return new window.Sup.CubicModel(t)}var u=n("async");e.loadAsset=r,e.createOuterAsset=i},{async:1}],5:[function(n,t,e){var r=n("./CubicModelRenderer"),i=n("./cubicModel");SupRuntime.registerPlugin("CubicModelRenderer",r),SupRuntime.registerPlugin("cubicModel",i)},{"./CubicModelRenderer":3,"./cubicModel":4}]},{},[5]);