"use strict";!function t(e,i,o){function s(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(n)return n(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var f=i[r]={exports:{}};e[r][0].call(f.exports,function(t){var i=e[r][1][t];return s(i?i:t)},f,f.exports,t,e,i,o)}return i[r].exports}for(var n="function"==typeof require&&require,r=0;r<o.length;r++)s(o[r]);return s}({1:[function(t,e,i){var o=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},s=SupEngine.THREE,n=function(t){function e(e){t.call(this,e,"CannonBody"),this.actorPosition=new s.Vector3,this.actorOrientation=new s.Quaternion,this.body=new window.CANNON.Body,SupEngine.Cannon.World.addBody(this.body)}return o(e,t),e.prototype.setIsLayerActive=function(t){},e.prototype.setup=function(t){switch(this.mass=null!=t.mass?t.mass:0,this.fixedRotation=null!=t.fixedRotation&&t.fixedRotation,this.positionOffset=null!=t.positionOffset?t.positionOffset:{x:0,y:0,z:0},this.group=null!=t.group?t.group:1,this.mask=null!=t.mask?t.mask:1,this.actor.getGlobalPosition(this.actorPosition),this.actor.getGlobalOrientation(this.actorOrientation),this.body.mass=this.mass,this.body.type=0===this.mass?window.CANNON.Body.STATIC:window.CANNON.Body.DYNAMIC,this.body.material=SupEngine.Cannon.World.defaultMaterial,this.body.fixedRotation=this.fixedRotation,this.body.collisionFilterGroup=this.group,this.body.collisionFilterMask=this.mask,this.body.updateMassProperties(),null!=t.orientationOffset?this.orientationOffset={x:s.Math.degToRad(t.orientationOffset.x),y:s.Math.degToRad(t.orientationOffset.y),z:s.Math.degToRad(t.orientationOffset.z)}:this.orientationOffset={x:0,y:0,z:0},this.shape=t.shape,this.shape){case"box":this.halfSize=null!=t.halfSize?t.halfSize:{x:.5,y:.5,z:.5},this.body.addShape(new window.CANNON.Box((new window.CANNON.Vec3).copy(this.halfSize)));break;case"sphere":this.radius=null!=t.radius?t.radius:1,this.body.addShape(new window.CANNON.Sphere(this.radius));break;case"cylinder":this.radius=null!=t.radius?t.radius:1,this.height=null!=t.height?t.height:1,this.segments=null!=t.segments?t.segments:16,this.body.addShape(new window.CANNON.Cylinder(this.radius,this.radius,this.height,this.segments))}this.body.position.set(this.actorPosition.x,this.actorPosition.y,this.actorPosition.z),this.body.shapeOffsets[0].copy(this.positionOffset),this.body.shapeOrientations[0].setFromEuler(this.orientationOffset.x,this.orientationOffset.y,this.orientationOffset.z),this.body.quaternion.set(this.actorOrientation.x,this.actorOrientation.y,this.actorOrientation.z,this.actorOrientation.w)},e.prototype.update=function(){this.actorPosition.set(this.body.position.x,this.body.position.y,this.body.position.z),this.actor.setGlobalPosition(this.actorPosition),this.actorOrientation.set(this.body.quaternion.x,this.body.quaternion.y,this.body.quaternion.z,this.body.quaternion.w),this.actor.setGlobalOrientation(this.actorOrientation)},e.prototype._destroy=function(){SupEngine.Cannon.World.remove(this.body),this.body=null,t.prototype._destroy.call(this)},e}(SupEngine.ActorComponent);Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},{}],2:[function(t,e,i){var o=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},s=t("./CannonBodyMarkerUpdater"),n=SupEngine.THREE,r=new n.Vector3,a=new n.Euler,h=function(t){function e(e){t.call(this,e,"CannonBodyMarker"),this.markerActor=new SupEngine.Actor(this.actor.gameInstance,"Marker",null,{layer:-1})}return o(e,t),e.prototype.setIsLayerActive=function(t){null!=this.mesh&&(this.mesh.visible=t)},e.prototype.update=function(){t.prototype.update.call(this),this.actor.getGlobalPosition(r),this.markerActor.setGlobalPosition(r),this.actor.getGlobalEulerAngles(a),this.markerActor.setGlobalEulerAngles(a)},e.prototype.setBox=function(t,e){null!=this.mesh&&this._clearRenderer();var i=new n.BoxGeometry(2*e.x,2*e.y,2*e.z),o=new n.MeshBasicMaterial({wireframe:!0,color:16013796,transparent:!0,opacity:.2});this.mesh=new n.Mesh(i,o),this.mesh.quaternion.setFromEuler(new n.Euler(n.Math.degToRad(t.x),n.Math.degToRad(t.y),n.Math.degToRad(t.z))),this.markerActor.threeObject.add(this.mesh),this.mesh.updateMatrixWorld(!1)},e.prototype.setSphere=function(t){null!=this.mesh&&this._clearRenderer();var e=new n.SphereGeometry(t),i=new n.MeshBasicMaterial({wireframe:!0,color:16013796,transparent:!0,opacity:.2});this.mesh=new n.Mesh(e,i),this.markerActor.threeObject.add(this.mesh),this.mesh.updateMatrixWorld(!1)},e.prototype.setCylinder=function(t,e,i,o){null!=this.mesh&&this._clearRenderer();var s=new n.CylinderGeometry(e,e,i,o),r=new n.MeshBasicMaterial({wireframe:!0,color:16013796,transparent:!0,opacity:.2});this.mesh=new n.Mesh(s,r),this.mesh.quaternion.setFromEuler(new n.Euler(n.Math.degToRad(t.x+90),n.Math.degToRad(t.y),n.Math.degToRad(t.z))),this.markerActor.threeObject.add(this.mesh),this.mesh.updateMatrixWorld(!1)},e.prototype.setPositionOffset=function(t){this.mesh.position.copy(t),this.mesh.updateMatrixWorld(!1)},e.prototype._clearRenderer=function(){this.markerActor.threeObject.remove(this.mesh),this.mesh.traverse(function(t){null!=t.dispose&&t.dispose()}),this.mesh=null},e.prototype._destroy=function(){null!=this.mesh&&this._clearRenderer(),t.prototype._destroy.call(this)},e.Updater=s.default,e}(SupEngine.ActorComponent);Object.defineProperty(i,"__esModule",{value:!0}),i.default=h},{"./CannonBodyMarkerUpdater":3}],3:[function(t,e,i){var o=function(){function t(t,e,i){switch(this.client=t,this.bodyRenderer=e,this.config=i,this.config.shape){case"box":this.bodyRenderer.setBox(this.config.orientationOffset,this.config.halfSize);break;case"sphere":this.bodyRenderer.setSphere(this.config.radius);break;case"cylinder":this.bodyRenderer.setCylinder(this.config.orientationOffset,this.config.radius,this.config.height,this.config.segments)}this.bodyRenderer.setPositionOffset(this.config.positionOffset)}return t.prototype.destroy=function(){},t.prototype.config_setProperty=function(t,e){(t.indexOf("orientationOffset")!==-1&&"box"===this.config.shape||t.indexOf("halfSize")!==-1||"shape"===t&&"box"===e)&&(this.bodyRenderer.setBox(this.config.orientationOffset,this.config.halfSize),this.bodyRenderer.setPositionOffset(this.config.positionOffset)),("radius"===t&&"sphere"===this.config.shape||"shape"===t&&"sphere"===e)&&(this.bodyRenderer.setSphere(this.config.radius),this.bodyRenderer.setPositionOffset(this.config.positionOffset)),(t.indexOf("orientationOffset")!==-1&&"cylinder"===this.config.shape||"radius"===t&&"cylinder"===this.config.shape||"shape"===t&&"cylinder"===e||"height"===t||"segments"===t)&&(this.bodyRenderer.setCylinder(this.config.orientationOffset,this.config.radius,this.config.height,this.config.segments),this.bodyRenderer.setPositionOffset(this.config.positionOffset)),t.indexOf("positionOffset")!==-1&&this.bodyRenderer.setPositionOffset(this.config.positionOffset)},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=o},{}],4:[function(t,e,i){var o=t("./CannonBody"),s=t("./CannonBodyMarker");SupEngine.registerComponentClass("CannonBody",o.default),SupEngine.registerEditorComponentClass("CannonBodyMarker",s.default)},{"./CannonBody":1,"./CannonBodyMarker":2}]},{},[4]);