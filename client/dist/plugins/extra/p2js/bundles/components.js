"use strict";!function t(e,o,i){function s(n,h){if(!o[n]){if(!e[n]){var a="function"==typeof require&&require;if(!h&&a)return a(n,!0);if(r)return r(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var l=o[n]={exports:{}};e[n][0].call(l.exports,function(t){var o=e[n][1][t];return s(o?o:t)},l,l.exports,t,e,o,i)}return o[n].exports}for(var r="function"==typeof require&&require,n=0;n<i.length;n++)s(i[n]);return s}({1:[function(t,e,o){var i=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},s=SupEngine.THREE,r=function(t){function e(e){t.call(this,e,"P2Body"),this.actorPosition=new s.Vector3,this.actorAngles=new s.Euler,this.body=new window.p2.Body,SupEngine.P2.world.addBody(this.body)}return i(e,t),e.prototype.setIsLayerActive=function(t){},e.prototype.setup=function(t){switch(this.mass=null!=t.mass?t.mass:0,this.fixedRotation=null!=t.fixedRotation&&t.fixedRotation,this.offsetX=null!=t.offsetX?t.offsetX:0,this.offsetY=null!=t.offsetY?t.offsetY:0,this.actor.getGlobalPosition(this.actorPosition),this.actor.getGlobalEulerAngles(this.actorAngles),this.body.mass=this.mass,this.body.type=0===this.mass?window.p2.Body.STATIC:window.p2.Body.DYNAMIC,this.body.material=SupEngine.P2.world.defaultMaterial,this.body.fixedRotation=this.fixedRotation,this.body.updateMassProperties(),this.shape=t.shape,this.shape){case"box":this.width=null!=t.width?t.width:.5,this.height=null!=t.height?t.height:.5,this.angle=null!=t.angle?t.angle*(Math.PI/180):0,this.body.addShape(new window.p2.Box({width:this.width,height:this.height}));break;case"circle":this.radius=null!=t.radius?t.radius:1,this.angle=0,this.body.addShape(new window.p2.Circle({radius:this.radius}))}this.body.position=[this.actorPosition.x,this.actorPosition.y],this.body.shapes[0].position=[this.offsetX,this.offsetY],this.body.angle=this.actorAngles.z+this.angle},e.prototype.update=function(){this.actorPosition.x=this.body.position[0],this.actorPosition.y=this.body.position[1],this.actor.setGlobalPosition(this.actorPosition),this.actorAngles.z=this.body.angle-this.angle,this.actor.setGlobalEulerAngles(this.actorAngles)},e.prototype._destroy=function(){SupEngine.P2.world.removeBody(this.body),this.body=null,t.prototype._destroy.call(this)},e}(SupEngine.ActorComponent);Object.defineProperty(o,"__esModule",{value:!0}),o.default=r},{}],2:[function(t,e,o){var i=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},s=t("./P2BodyMarkerUpdater"),r=SupEngine.THREE,n=new r.Vector3,h=new r.Euler,a=function(t){function e(e){t.call(this,e,"P2BodyMarker"),this.offset=new r.Vector3(0,0,0),this.angle=0,this.markerActor=new SupEngine.Actor(this.actor.gameInstance,"Marker",null,{layer:-1})}return i(e,t),e.prototype.setIsLayerActive=function(t){null!=this.mesh&&(this.mesh.visible=t)},e.prototype.update=function(){t.prototype.update.call(this),this.actor.getGlobalPosition(n),this.markerActor.setGlobalPosition(n),this.actor.getGlobalEulerAngles(h),h.x=h.y=0,h.z+=this.angle,this.markerActor.setGlobalEulerAngles(h)},e.prototype.setBox=function(t,e){null!=this.mesh&&this._clearRenderer();var o=new r.Geometry;o.vertices.push(new r.Vector3(-t/2,-e/2,0),new r.Vector3(t/2,-e/2,0),new r.Vector3(t/2,e/2,0),new r.Vector3(-t/2,e/2,0),new r.Vector3(-t/2,-e/2,0));var i=new r.LineBasicMaterial({color:16013796});this.mesh=new r.Line(o,i),this.markerActor.threeObject.add(this.mesh),this.mesh.position.copy(this.offset),this.mesh.updateMatrixWorld(!1)},e.prototype.setCircle=function(t){null!=this.mesh&&this._clearRenderer();var e=new r.CircleGeometry(t,16),o=new r.MeshBasicMaterial({color:16013796,wireframe:!0});this.mesh=new r.Mesh(e,o),this.markerActor.threeObject.add(this.mesh),this.mesh.position.copy(this.offset),this.mesh.updateMatrixWorld(!1)},e.prototype.setOffset=function(t,e){this.offset.set(t,e,0),this.mesh.position.copy(this.offset),this.mesh.updateMatrixWorld(!1)},e.prototype.setAngle=function(t){this.angle=t*(Math.PI/180)},e.prototype._clearRenderer=function(){this.markerActor.threeObject.remove(this.mesh),this.mesh.geometry.dispose(),this.mesh.material.dispose(),this.mesh=null},e.prototype._destroy=function(){null!=this.mesh&&this._clearRenderer(),this.actor.gameInstance.destroyActor(this.markerActor),t.prototype._destroy.call(this)},e.Updater=s.default,e}(SupEngine.ActorComponent);Object.defineProperty(o,"__esModule",{value:!0}),o.default=a},{"./P2BodyMarkerUpdater":3}],3:[function(t,e,o){var i=function(){function t(t,e,o){switch(this.bodyRenderer=e,this.config=o,this.config.shape){case"box":this.bodyRenderer.setBox(this.config.width,this.config.height);break;case"circle":this.bodyRenderer.setCircle(this.config.radius)}this.bodyRenderer.setOffset(this.config.offsetX,this.config.offsetY),this.bodyRenderer.setAngle(this.config.angle)}return t.prototype.destroy=function(){},t.prototype.config_setProperty=function(t,e){("width"===t||"height"===t||"shape"===t&&"box"===e)&&this.bodyRenderer.setBox(this.config.width,this.config.height),("radius"===t||"shape"===t&&"circle"===e)&&this.bodyRenderer.setCircle(this.config.radius),"offsetX"!==t&&"offsetY"!==t||this.bodyRenderer.setOffset(this.config.offsetX,this.config.offsetY),"angle"===t&&this.bodyRenderer.setAngle(this.config.angle)},t}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=i},{}],4:[function(t,e,o){var i=t("./P2Body"),s=t("./P2BodyMarker");SupEngine.registerComponentClass("P2Body",i.default),SupEngine.registerEditorComponentClass("P2BodyMarker",s.default)},{"./P2Body":1,"./P2BodyMarker":2}]},{},[4]);